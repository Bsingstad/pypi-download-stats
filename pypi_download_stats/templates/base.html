{% from "graph_macro.html" import graph_macro %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Download Report for PyPI project {{ project }}</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="pypi-download-stats {{ version }}" />
    <meta name="description" content="Download statistics for PyPi project {{ project }} as of {{ curr_date|format_date_long }}" />
    <meta name="keywords" content="{{ project }},pypi,downloads,statistics" />
    <meta name="revised" content="pypi-download-stats, {{ curr_date|format_date_ymd }}" />
    <style type="text/css">
        body {
            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
            background-color: rgb(236, 236, 236);
            padding-left: 2em;
            padding-right: 2em;
        }
        h1 {
            margin-bottom: 0;
        }
        h2 {
            margin-top: 0;
            padding-left: 2em;
        }
        h3 {
            width: 100%;
            border-bottom: 1px solid rgb(211, 211, 211);
        }
        .graphdiv {
            margin-left: 2em;
            display: block;
        }
        .datadiv {
            display: none;
        }
        #footer {
            border-top: 1px solid black;
        }
        #footer p {
            margin-left: 2em;
        }
        table {
            border-collapse: collapse;
            border-spacing: 0;
        }
        td {
            padding:10px 5px;
            border-style: solid;
            border-width: 1px;
            overflow: hidden;
            word-break: normal;
        }
        th {
            padding: 10px 5px;
            border-style: solid;
            border-width: 1px;
            overflow: hidden;
            word-break: normal;
        }
    </style>

    <script type="text/javascript">
        function toggleAll() {
            var togglespan = document.getElementById("toggleall");
            console.log("togglespan.innerHtml=" + togglespan.innerHTML);
            var force_state = 1;
            if ( !togglespan.innerHTML || togglespan.innerHTML == "(hide all)" ) {
                togglespan.innerHTML = "(show all)";
                console.log("set togglespan.innerHtml to (show all)");
                force_state = 2;
            } else {
                togglespan.innerHTML = "(hide all)";
                console.log("set togglespan.innerHtml to (hide all)");
                force_state = 1;
            }
            var divsToHide = document.getElementsByClassName("graphdiv");
            var graphname = "";
            for(var i = 0; i < divsToHide.length; i++){
                toggleGraphDiv(divsToHide[i].id.substring(6), force_state);
            }
        }

        function toggleGraphDiv(graphid, force_state) {
            console.log("toggleGraphDiv(" + graphid + ", " + force_state + ")");
            var div = document.getElementById("graph_" + graphid);
            var ihtml = "";
            if ( force_state == 2 ) {
                div.style.display = "none";
                ihtml = "(show)";
            } else if ( force_state == 1 ) {
                div.style.display = "block";
                ihtml = "(hide)";
            } else if ( !div.style.display || div.style.display == "block" ) {
                div.style.display = "none";
                ihtml = "(show)";
            } else {
                div.style.display = "block";
                ihtml = "(hide)";
            }
            var togglelink = document.getElementById("toggle_" + graphid);
            togglelink.innerHTML = ihtml;
        }

        function toggleTableDiv(graphid) {
            var div = document.getElementById("data_" + graphid);
            var ihtml = "";
            if ( !div.style.display || div.style.display == "none" ) {
                div.style.display = "block";
                ihtml = "Hide Data Table";
            } else {
                div.style.display = "none";
                ihtml = "Show Data Table";
            }
            var togglelink = document.getElementById("toggletable_" + graphid);
            togglelink.innerHTML = ihtml;
        }
    </script>
    {{ resources }}
    {%- for graphkey in graph_keys %}
    <!-- script for {{ graphkey }} -->
    {{ graphs[graphkey]['script'] }}
    <!-- end script for {{ graphkey }} -->
    {%- endfor %}
  </head>
  <body>
    <h1>Download Report for PyPI project <a href="https://pypi.python.org/pypi/{{ project }}">{{ project }}</a></h1>
    <h2>As of {{ cache_date|format_date_long }}</h2>
    <div id="badges">
{% include 'badges.html' %}
    </div>
    <div id="nav">
{% include 'nav.html' %}
    </div>
    {%- for graphkey in graph_keys %}{{ graph_macro(graphkey, graphs[graphkey]) }}{%- endfor %}
  <div id="footer">
    <p>
      Generated by <a href="{{ proj_url }}">pypi-download-stats</a> v{{ version }} on {{ host }} as {{ user }} at {{ curr_date|format_date_long }}.
    </p>
  </div>
  </body>
</html>
